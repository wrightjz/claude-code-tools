---
name: codemap-updater
description: "Generates and updates a CODEMAP.md file that provides a quick reference to the codebase structure. Use when: (1) Starting work on a new or unfamiliar codebase, (2) After significant structural changes to the project, (3) When context is getting heavy and you need a quick reference instead of re-exploring. Reduces context burn by providing a pre-built navigation guide."
---

# Codemap Updater

Generates a CODEMAP.md file that serves as a quick reference for navigating the codebase, reducing the need for repeated exploration.

## When to Use

- Starting a new session on a codebase
- After major refactoring or adding new modules
- When you need to quickly understand project structure
- To preserve navigation knowledge across context compactions

## Workflow

### Step 1: Analyze Project Structure

Scan the project to understand its layout:

```bash
# Get directory structure (excluding common noise)
find . -type d \
  -not -path "*/node_modules/*" \
  -not -path "*/.git/*" \
  -not -path "*/dist/*" \
  -not -path "*/build/*" \
  -not -path "*/.next/*" \
  -not -path "*/__pycache__/*" \
  | head -50
```

### Step 2: Identify Key Entry Points

Find main entry files:

```bash
# Common entry points
ls -la index.ts index.js main.ts main.py app.ts app.js src/index.* src/main.* 2>/dev/null
```

### Step 3: Map Key Directories

For each major directory, identify its purpose:

| Directory | Purpose | Key Files |
|-----------|---------|-----------|
| `src/` | Source code | Entry points, core logic |
| `components/` | UI components | Reusable React/Vue components |
| `pages/` or `app/` | Routes/pages | Next.js/Nuxt pages |
| `lib/` or `utils/` | Utilities | Helper functions, shared code |
| `api/` | API routes | Backend endpoints |
| `services/` | Business logic | External service integrations |
| `hooks/` | Custom hooks | React hooks |
| `types/` | Type definitions | TypeScript interfaces |
| `config/` | Configuration | Environment, app config |
| `tests/` | Test files | Unit and integration tests |

### Step 4: Document Key Patterns

Note architectural patterns used:

- State management approach (Redux, Zustand, Context)
- API layer pattern (REST, GraphQL, tRPC)
- Styling approach (Tailwind, CSS Modules, styled-components)
- Testing framework (Jest, Vitest, Playwright)

### Step 5: Generate CODEMAP.md

Create or update the codemap file in the project root:

```markdown
# Codemap

Quick reference for navigating this codebase.

## Project Overview
[1-2 sentence description of what this project does]

## Tech Stack
- Framework: [Next.js / Express / etc.]
- Language: [TypeScript / Python / etc.]
- Database: [PostgreSQL / MongoDB / etc.]
- Styling: [Tailwind / CSS Modules / etc.]

## Directory Structure

### Core Directories
| Path | Purpose | Key Files |
|------|---------|-----------|
| `src/` | Main source | `index.ts` - entry point |
| ... | ... | ... |

### Entry Points
- **Main**: `src/index.ts` - Application bootstrap
- **API**: `src/api/` - REST endpoints
- **UI**: `src/components/` - React components

## Key Files Reference

### Configuration
- `package.json` - Dependencies and scripts
- `tsconfig.json` - TypeScript configuration
- `.env.example` - Environment variables template

### Core Logic
- `src/services/` - Business logic services
- `src/lib/` - Shared utilities

## Patterns & Conventions

### Naming
- Components: PascalCase (`UserProfile.tsx`)
- Utilities: camelCase (`formatDate.ts`)
- Constants: SCREAMING_SNAKE (`API_URL`)

### File Organization
[Describe how files are organized]

## Quick Navigation

| I want to... | Look in... |
|--------------|------------|
| Add a new API endpoint | `src/api/` |
| Create a new component | `src/components/` |
| Add a utility function | `src/lib/` |
| Modify database schema | `src/db/` or `prisma/` |
| Add a new page/route | `src/pages/` or `src/app/` |

---
*Last updated: [timestamp]*
*Generated by codemap-updater skill*
```

### Step 6: Save and Confirm

Write the CODEMAP.md to the project root and confirm completion.

## Maintenance

- Run this skill at the start of major development sessions
- Update after significant structural changes
- Reference the codemap instead of re-exploring directories

## Tips

- Keep the codemap concise - it's a quick reference, not full documentation
- Focus on navigation, not implementation details
- Update the "Last updated" timestamp when regenerating
